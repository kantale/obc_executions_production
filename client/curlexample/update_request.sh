curl --header "Content-Type: application/json" \
  --request POST \
  --data '{
	"filename":"pca_plink_and_plot",
	"bash":"%0Afrom%20airflow%20import%20DAG%0Afrom%20airflow.operators.bash_operator%20import%20BashOperator%0Afrom%20datetime%20import%20datetime%2C%20timedelta%0A%0Adefault_args%20%3D%20%7B%0A%20%20%20%20%27owner%27%3A%20%27Airflow%27%2C%0A%20%20%20%20%27start_date%27%3A%20datetime%282015%2C%206%2C%201%29%2C%0A%7D%0A%0A%0Adag%20%3D%20DAG%28%0A%20%20%20%20%27pca_plink_and_plot__1%27%2C%20default_args%3Ddefault_args%2C%20schedule_interval%3DNone%29%0A%0A%0Aplink__1_90beta_20190617__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27plink__1_90beta_20190617__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A%23%23%23%20BASH%20INSTALLATION%20COMMANDS%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%0Aecho%20%22OBC%3A%20INSTALLING%20TOOL%3A%20plink/1.90beta_20190617/1%22%0A%28%0A%23%20Insert%20the%20BASH%20commands%20that%20install%20this%20tool%0A%23%20The%20following%20tools%20are%20available%3A%0A%23%20%20apt-get%2C%20wget%0A%0A./plink%20--file%20toy%0Aif%20%5B%20%24%3F%20-ne%200%20%5D%20%3B%20then%0A%20wget%20http%3A//s3.amazonaws.com/plink1-assets/plink_linux_x86_64_20190617.zip%0A%20unzip%20plink_linux_x86_64_20190617.zip%0Afi%0A%0A%0A%29%0Aecho%20%22OBC%3A%20INSTALLATION%20OF%20TOOL%3A%20plink/1.90beta_20190617/1%20.%20COMPLETED%22%0A%23%23%23%20END%20OF%20INSTALLATION%20COMMANDS%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%0A%0A%23%23%23%20BASH%20VALIDATION%20COMMANDS%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%0Aecho%20%22OBC%3A%20VALIDATING%20THE%20INSTALLATION%20OF%20THE%20TOOL%3A%20plink/1.90beta_20190617/1%22%0A%28%0A%23%20Insert%20the%20BASH%20commands%20that%20confirm%20that%20this%20tool%20is%20correctly%20installed%0A%23%20In%20success%2C%20this%20script%20should%20return%200%20exit%20code.%0A%23%20A%20non-zero%20exit%20code%2C%20means%20failure%20to%20validate%20installation.%0A%0A./plink%20--file%20toy%0A%0A%29%0Aif%20%5B%20%24%3F%20-eq%200%20%5D%20%3B%20then%0A%20%20%20echo%20%22OBC%3A%20VALIDATION%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%20SUCCEEDED%22%0Aelse%0A%20%20%20echo%20%22OBC%3A%20VALIDATION%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%20FAILED%22%0Afi%0A%0A%23%23%23%20END%20OF%20VALIDATION%20COMMANDS%20FOR%20TOOL%3A%20plink/1.90beta_20190617/1%0A%0A%23%23%23%20SETTING%20TOOL%20VARIABLES%20FOR%3A%20plink/1.90beta_20190617/1%0Aexport%20plink__1_90beta_20190617__1__path%3D%22./plink%22%20%23%20installation%20path%20of%20executable%20%0Aecho%20%22OBC%3A%20SET%20plink__1_90beta_20190617__1__path%3D%24plink__1_90beta_20190617__1__path%20%20%20%3C--%20installation%20path%20of%20executable%20%22%0A%23%23%23%20END%20OF%20SETTING%20TOOL%20VARIABLES%20FOR%3A%20plink/1.90beta_20190617/1%0A%0A%23%23%23%20CREATING%20BASH%20WITH%20TOOL%20VARIABLES%0Acat%20%3E%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%20%3C%3C%20ENDOFFILE%0Aplink__1_90beta_20190617__1__path%3D%22./plink%22%0AENDOFFILE%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Aanaconda3__2019_03__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27anaconda3__2019_03__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A%23%23%23%20BASH%20INSTALLATION%20COMMANDS%20FOR%20TOOL%3A%20anaconda3/2019.03/1%0Aecho%20%22OBC%3A%20INSTALLING%20TOOL%3A%20anaconda3/2019.03/1%22%0A%23%23%23%20READING%20VARIABLES%20FROM%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A%0A%28%0A%23%20Insert%20the%20BASH%20commands%20that%20install%20this%20tool%0A%23%20The%20following%20tools%20are%20available%3A%0A%23%20%20apt-get%2C%20wget%0A%0Amd5sum%20%20Anaconda3-2019.03-Linux-x86_64.sh%20%7C%20grep%2043caea3d726779843f130a7fb2d380a2%0Aif%20%5B%20%24%3F%20-ne%200%20%5D%3B%20then%0A%20%20%20wget%20https%3A//repo.anaconda.com/archive/Anaconda3-2019.03-Linux-x86_64.sh%20%0A%20%20%20bash%20Anaconda3-2019.03-Linux-x86_64.sh%20-b%20-p%20./anaconda3%0Afi%0A%0A%29%0Aecho%20%22OBC%3A%20INSTALLATION%20OF%20TOOL%3A%20anaconda3/2019.03/1%20.%20COMPLETED%22%0A%23%23%23%20END%20OF%20INSTALLATION%20COMMANDS%20FOR%20TOOL%3A%20anaconda3/2019.03/1%0A%0A%23%23%23%20BASH%20VALIDATION%20COMMANDS%20FOR%20TOOL%3A%20anaconda3/2019.03/1%0Aecho%20%22OBC%3A%20VALIDATING%20THE%20INSTALLATION%20OF%20THE%20TOOL%3A%20anaconda3/2019.03/1%22%0A%28%0A%23%20Insert%20the%20BASH%20commands%20that%20confirm%20that%20this%20tool%20is%20correctly%20installed%0A%23%20In%20success%2C%20this%20script%20should%20return%200%20exit%20code.%0A%23%20A%20non-zero%20exit%20code%2C%20means%20failure%20to%20validate%20installation.%0A%0Amd5sum%20%20Anaconda3-2019.03-Linux-x86_64.sh%20%7C%20grep%2043caea3d726779843f130a7fb2d380a2%0Aif%20%5B%20%24%3F%20-ne%200%20%5D%3B%20then%0A%20%20%20exit%201%0Afi%0A%0A./anaconda3/bin/python%20--version%0Aif%20%5B%20%24%3F%20-ne%200%20%5D%3B%20then%0A%20%20%20exit%201%0Afi%0A%0Aexit%200%0A%0A%0A%29%0Aif%20%5B%20%24%3F%20-eq%200%20%5D%20%3B%20then%0A%20%20%20echo%20%22OBC%3A%20VALIDATION%20FOR%20TOOL%3A%20anaconda3/2019.03/1%20SUCCEEDED%22%0Aelse%0A%20%20%20echo%20%22OBC%3A%20VALIDATION%20FOR%20TOOL%3A%20anaconda3/2019.03/1%20FAILED%22%0Afi%0A%0A%23%23%23%20END%20OF%20VALIDATION%20COMMANDS%20FOR%20TOOL%3A%20anaconda3/2019.03/1%0A%0A%23%23%23%20SETTING%20TOOL%20VARIABLES%20FOR%3A%20anaconda3/2019.03/1%0Aexport%20anaconda3__2019_03__1__path%3D%22./anaconda3/bin/python%22%20%23%20Installation%20python%20%0Aecho%20%22OBC%3A%20SET%20anaconda3__2019_03__1__path%3D%24anaconda3__2019_03__1__path%20%20%20%3C--%20Installation%20python%20%22%0A%23%23%23%20END%20OF%20SETTING%20TOOL%20VARIABLES%20FOR%3A%20anaconda3/2019.03/1%0A%0A%23%23%23%20CREATING%20BASH%20WITH%20TOOL%20VARIABLES%0Acat%20%3E%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%20%3C%3C%20ENDOFFILE%0Aanaconda3__2019_03__1__path%3D%22./anaconda3/bin/python%22%0AENDOFFILE%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Astep__main_step__pca_plink_and_plot__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27step__main_step__pca_plink_and_plot__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%0AOBC_START%3D%24%28eval%20%22declare%22%29%0A%23%20Insert%20the%20BASH%20commands%20for%20this%20step%0A%0Ainput__pedmap__pca_plink__1%3D%24%7Binput__pedmap__pca_plink_and_plot__1%7D%0A%0AOBC_CURRENT%3D%24%28eval%20%22declare%22%29%0Acomm%20-3%20%3C%28echo%20%22%24OBC_START%22%20%7C%20grep%20-v%20%22_%3D%22%29%20%3C%28echo%20%22%24OBC_CURRENT%22%20%7C%20grep%20-v%20OBC_START%20%7C%20grep%20-v%20PIPESTATUS%20%7C%20grep%20-v%20%22_%3D%22%29%20%3E%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__1.sh%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Astep__main_step__pca_plink__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27step__main_step__pca_plink__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__1.sh%0AOBC_START%3D%24%28eval%20%22declare%22%29%0A%23%20Insert%20the%20BASH%20commands%20for%20this%20step%0A%0Aoutput__result_pca__pca_plink__1%3D%24%7Binput__pedmap__pca_plink__1%7D_pca%0A%0A%24%7Bplink__1_90beta_20190617__1__path%7D%20%20%20%20--file%20%24%7Binput__pedmap__pca_plink__1%7D%20%20%20%20--pca%20%20%20%20--out%20%24%7Boutput__result_pca__pca_plink__1%7D%0A%20%20%20%0A%0A%20%20%20%0AOBC_CURRENT%3D%24%28eval%20%22declare%22%29%0Acomm%20-3%20%3C%28echo%20%22%24OBC_START%22%20%7C%20grep%20-v%20%22_%3D%22%29%20%3C%28echo%20%22%24OBC_CURRENT%22%20%7C%20grep%20-v%20OBC_START%20%7C%20grep%20-v%20PIPESTATUS%20%7C%20grep%20-v%20%22_%3D%22%29%20%3E%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink__1__1.sh%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Astep__main_step__pca_plink_and_plot__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27step__main_step__pca_plink_and_plot__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__1.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink__1__1.sh%0AOBC_START%3D%24%28eval%20%22declare%22%29%0A%0A%0Ainput__eigenvectors__2d_scatter_of_plink_pca__1%3D%24%7Boutput__result_pca__pca_plink__1%7D.eigenvec%0A%0AOBC_CURRENT%3D%24%28eval%20%22declare%22%29%0Acomm%20-3%20%3C%28echo%20%22%24OBC_START%22%20%7C%20grep%20-v%20%22_%3D%22%29%20%3C%28echo%20%22%24OBC_CURRENT%22%20%7C%20grep%20-v%20OBC_START%20%7C%20grep%20-v%20PIPESTATUS%20%7C%20grep%20-v%20%22_%3D%22%29%20%3E%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__2.sh%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Astep__main_step__2d_scatter_of_plink_pca__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27step__main_step__2d_scatter_of_plink_pca__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__1.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink__1__1.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__2.sh%0AOBC_START%3D%24%28eval%20%22declare%22%29%0A%23%20Insert%20the%20BASH%20commands%20for%20this%20step%0A%0Acat%20%3E%20p.py%20%3C%3C%20EOFF%0A%0Aimport%20pandas%20as%20pd%0A%0Afn%20%3D%20%22%24%7Binput__eigenvectors__2d_scatter_of_plink_pca__1%7D%22%0Adf%20%3D%20pd.read_csv%28fn%2C%20header%3DNone%2C%20sep%3D%27%20%27%29%0Aax%20%3D%20df.plot.scatter%28x%3D2%2C%20y%3D3%29%0Afig%20%3D%20ax.figure%0Afig.savefig%28%27scatter_plot.pdf%27%29%0A%0AEOFF%0A%0A%24%7Banaconda3__2019_03__1__path%7D%20p.py%0A%0Aoutput__plot__2d_scatter_of_plink_pca__1%3Dscatter_plot.pdf%0A%0AOBC_CURRENT%3D%24%28eval%20%22declare%22%29%0Acomm%20-3%20%3C%28echo%20%22%24OBC_START%22%20%7C%20grep%20-v%20%22_%3D%22%29%20%3C%28echo%20%22%24OBC_CURRENT%22%20%7C%20grep%20-v%20OBC_START%20%7C%20grep%20-v%20PIPESTATUS%20%7C%20grep%20-v%20%22_%3D%22%29%20%3E%20%24%7BOBC_WORK_PATH%7D/step__main_step__2d_scatter_of_plink_pca__1__1.sh%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Astep__main_step__pca_plink_and_plot__1%20%3D%20BashOperator%28%0A%20%20%20%20%0A%20%20%20%20task_id%3D%27step__main_step__pca_plink_and_plot__1%27%2C%0A%20%20%20%20bash_command%3D%22%22%22%0A.%20%24%7BOBC_WORK_PATH%7D/plink__1_90beta_20190617__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/anaconda3__2019_03__1_VARS.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__1.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink__1__1.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__2.sh%0A.%20%24%7BOBC_WORK_PATH%7D/step__main_step__2d_scatter_of_plink_pca__1__1.sh%0AOBC_START%3D%24%28eval%20%22declare%22%29%0A%0A%0Aoutput__plot__pca_plink_and_plot__1%3D%24%7Boutput__plot__2d_scatter_of_plink_pca__1%7D%0A%0A%0AOBC_CURRENT%3D%24%28eval%20%22declare%22%29%0Acomm%20-3%20%3C%28echo%20%22%24OBC_START%22%20%7C%20grep%20-v%20%22_%3D%22%29%20%3C%28echo%20%22%24OBC_CURRENT%22%20%7C%20grep%20-v%20OBC_START%20%7C%20grep%20-v%20PIPESTATUS%20%7C%20grep%20-v%20%22_%3D%22%29%20%3E%20%24%7BOBC_WORK_PATH%7D/step__main_step__pca_plink_and_plot__1__3.sh%0A%0A%22%22%22%2C%0A%20%20%20%20dag%3Ddag%29%0A%0A%0Aplink__1_90beta_20190617__1%20%3E%3E%20anaconda3__2019_03__1%20%3E%3E%20step__main_step__pca_plink_and_plot__1%20%3E%3E%20step__main_step__pca_plink__1%20%3E%3E%20step__main_step__pca_plink_and_plot__1%20%3E%3E%20step__main_step__2d_scatter_of_plink_pca__1%20%3E%3E%20step__main_step__pca_plink_and_plot__1%0A",
	"owner":"Manos"}' \
  http://0.0.0.0:5000/generate_dag
